name: Documentation

on:
  push:
    branches:
      - main # update to match your development branch (master, main, dev, trunk, ...)
    tags: '*'
  pull_request:

jobs:
  build:
    permissions:
      actions: write
      contents: write
      pull-requests: read
      statuses: write
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: julia-actions/setup-julia@v2
        with:
          version: '1'
      - uses: julia-actions/cache@v2
      - name: Install dependencies
        run: julia --project=docs/ -e 'using Pkg; Pkg.develop(PackageSpec(path=pwd())); Pkg.instantiate()'
      - name: Build and deploy
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # If authenticating with GitHub Actions token
          DOCUMENTER_KEY: ${{ LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlHNHdJQkFBS0NBWUVBcFNWUmU1ZSthcUpvUHZGcTBVQlJwRHhtYVZXZWJrNWNYZ24ybzN0RFhheklkVXB0CklWK21ISTc3cmlvOVFPVlg1dWYwSlRMWi9wR1ZGS2o3ZzhwQ3J3NEMxUjZKWFEyaUEvY0x4eG54aWQzSDQ1Q0QKalNnL2NzbkVYaE4wNDRNclNkZnVYOVVvWnVRaDFsMDEwZk5FaGY4QVVXODlpM05mVmNzQW9MeWtYNTVNMzk0bQpnaU11MUkyLy9TWjFFNVg5ak5nM1lpK2IydlRGNkIyYjdaelNIdkVWVlZ3WkxnZkZCbHUreDdKbGNUNGZqN0hZCmMyR1B3eGtoc0hKMmpQVG8zK0FDZGQ1RFVPRURUSkNJRVNkNk5qVUY3NHhjZXVNNVFpa2xuODVuNU93Mkh2UDAKSmdHeHYwamc3ek5wcDlYNGwwZEZ0NnFIb0xMVS9lVHJGRjhFcU9lYlpEMUQ5WWVzZlVrMDllNHhoekNyRURNNQpRN2x3bTFSNkRqcFFVMGY4bVZYcXpKYTcrckQ5ZHFlR0puSnhVdk10Sm5BV1FaMTFjRlNFbmYzZzkyd3o3cHlkCnY2ZU9YQStHNTRjZjlhQnNEclFvVVYvclFKOHhCRW0zc1lBazJPeUg0MVkzK2dzQmp4TFRlYWpFRDAzQVZoR1IKT3pHYjVYaUNpNkk4SmF0dkFnTUJBQUVDZ2dHQUZqZkVFNTJocDVUNzgyUGxYQXVNTUUxVDlkM245NjBoTGlHbgpCZTJDYmFyZU9URnZKeXRJSE5WN3RMM0lDZUFSQ0dheWFRTERZMFZReWp2RndzQkdZbWkvSnM3NTZnUDRoUklLCmlwbko3aU5oVGhOV0wzcDN0c2pBVzJ2QXNROG5sc0t2TmtObU1SbUdGK0hvYUx1U3YzaEVJYkNXbGhsS2ZTOVgKZ1VoLzBNRnFWRC85N0VveGRiVXdYQzE5V01vNEYyZkxZN0ZHQlpvaXVneXB1cmo3WitCRlgzdUpnN0RWNS9vVgoyNlg3a2RXcXgxbEU1cGo4ajJIbEwyam0zQ1hpcXdReGtPUldOeW5vb1NCbk0zVlRKeW9HdDVOMTZVVmlRU3V3CitUc05ocXhveHB0Vm9ZM3ZadWw0eFVUdW9VeWJNU1dUSE5tN29zTzNGRTNNWGtrV2VXK1VzT2tKRkYvcmR5aVMKTm8ySTJGdmxaYVNTMU9oNWdsMmNzSlNFQkl2S0Znc0NqY2Y0WW9abmtEdU9sTjAvN2hSc3cwaFAwdWhMQzVoTgpYTGxrSFBhOFJ3SDdZdjFycmRFeGpMNWZBQ3R3dVJ5RG1SS0xOV2k0WHN0YUl5dXdHck1POWw3bUZHUkFvdTF5CnM0dzZXRFk4UnlzZzd6SWwrRVFGbXFsSloxb1pBb0hCQU9RY0h0REU5SW1xR3QxaUplTXg2amZTeEdpcExFWlcKTHVOdEI4a2xoUUlNTnpqMVJvTDB6ZnRxRURGaWJSZVN5UEpTektpVnVRcnF4d2tOeXVVaitybENxR0MwZnVVZwpGQ1 }} # If authenticating with SSH deploy key
        run: julia --project=docs/ docs/make.jl